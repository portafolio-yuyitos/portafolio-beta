@model List<portafolio.Models.ViewModels.OPedidoDetalles>
    <div class="w-100 title-table">
        <h5 class="c-orange mb-4">Listado de ordenes de pedido:</h5>
    </div>
    <table class="table table-dark table-hover col-md-12 border-top" id="tablaOP">
        <thead>
            <tr>
                <th scope="col">#</th>
                <th scope="col">ID</th>
                <th scope="col">Proveedor</th>
                <th scope="col">Precio Total</th>
                <th scope="col">Acciones</th>
            </tr>
        </thead>
        <tbody>
            @{ int contador = 1;}
            @foreach (var item in Model)
             {
                if (item.Encabezado.Estado == 0)
                 {
                    <tr data-enviada="@item.Encabezado.IsEnviado" data-id-proveedor="@item.Encabezado.IdProveedor" data-productos='@Html.Raw(Json.Encode(item.Detalles))'>
                    @{
                        double total = item.Detalles.Sum(deta => deta.PrecioProducto);
                    }
                    <td>@contador</td>
                    <td>@item.Encabezado.NumeroPedido</td>
                    <td>@item.Encabezado.NombreProveedor</td>
                    <td>@total</td>
                    <td>
                        @if (item.Encabezado.IsEnviado == 0)
                    {
                    <button id="botonEliminarOrden" data-toggle="tooltip" data-placement="top" title="Eliminar orden." class="btn btn-danger" onclick="eliminarOP(this)"><i class="fa-trash-alt fa-w-14" aria-hidden="true"/></button>
                    <button id="botonEnviarOrden" data-toggle="tooltip" data-placement="top" title="Enviar orden." class="btn btn-success" onclick="enviarOrden(@item.Encabezado.NumeroPedido)"><i class="fab fa-telegram-plane"></i></button>
                    <button id="botonEditarOrden" class="btn btn-warning" onclick="muestraOP(this)" ><i class="fas fa-edit"></i></button>
                    }
                    else
                    {
                    <button id="botonEliminarOrden" data-toggle="tooltip" data-placement="top" title="No se puede eliminar una orden enviada." class="btn btn-danger" disabled onclick="eliminarOP(this)"><i class="fa-trash-alt fa-w-14" aria-hidden="true"  data-icon="trash-alt"></i></button>
                    <button id="botonEnviarOrden" data-toggle="tooltip" data-placement="top" title="La orden ya ha sido enviada." class="btn btn-success" disabled alt="La orden ya ha sido enviada." onclick="enviarOrden(@item.Encabezado.NumeroPedido)"><i class="fab fa-telegram-plane"></i></button>
                    <button id="botonEditarOrden" disabled onclick="muestraOP(this)" class="btn btn-warning"><i class="fas fa-edit"></i></button>
                    }

                    </td>

                </tr>
                contador++;
                }

             }

        </tbody>
       
    </table>
    